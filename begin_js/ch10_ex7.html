<!DOCTYPE html>

<html lang="en">

<head>
  <title>Chapter 10, Example 3</title>
</head>

<body>
  <img id="img0" src="Animated-Flag-Indonesia.gif" />
  <div id="status"></div>

  <script>
    var myImages = [
      "Animated-Flag-Indonesia.gif",
      "Animated-Flag-Malaysia.gif",
      "Animated-Flag-Singapore.gif",
      "Animated-Flag-Mexico.gif",
      "Animated-Flag-Thailand.gif"
    ];

    function changeImg(e) {
      var el = e.target;
      var newImgNumber = Math.round(Math.random()*4);

      while (el.src.indexOf(myImages[newImgNumber]) != -1) {
        newImgNumber = Math.round(Math.random()*4);
      }

      el.src = myImages[newImgNumber];
    }

    function updateStatus(e) {
      var el = e.target;
      var status = document.getElementById("status");

      status.innerHTML = "The image changed to " + el.src;

      if (el.src.indexOf("Animated-Flag-Mexico") > -1) {
        el.removeEventListener("click", changeImg);
        el.removeEventListener("click", updateStatus);
      }
    }

    var imgObj = document.getElementById("img0");

    imgObj.addEventListener("click", changeImg);
    imgObj.addEventListener("click", updateStatus);
  </script>
</body>

</html>
